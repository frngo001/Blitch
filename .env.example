# ===========================================
# Overleaf Community Edition - Environment Variables
# ===========================================
# Copy this file to .env and fill in your values
# For Railway: Set these in the Railway dashboard

# ===========================================
# Database Configuration
# ===========================================
# MongoDB connection string (Railway provides this automatically)
MONGO_URL=mongodb://localhost:27017/sharelatex?directConnection=true
MONGO_HOST=mongo

# Redis connection (Railway provides this automatically)
REDIS_HOST=redis
# For Railway Redis addon, use REDIS_URL instead:
# REDIS_URL=redis://default:password@host:port

# ===========================================
# LLM Provider API Keys
# ===========================================
# At least one provider is required for AI features

# DeepSeek (Recommended - cost-effective)
DEEPSEEK_API_KEY=sk-your-deepseek-api-key

# Anthropic (Optional - for Claude models)
ANTHROPIC_API_KEY=

# OpenAI (Optional)
OPENAI_API_KEY=

# Google AI (Optional - for Gemini)
GOOGLE_AI_API_KEY=

# Groq (Optional - fast inference)
GROQ_API_KEY=

# ===========================================
# AI Agent Configuration
# ===========================================
AI_AGENT_ENABLED=true
AI_AGENT_HOST=ai-agent
AI_AGENT_PORT=3020
AI_DEFAULT_PROVIDER=deepseek
AI_DEFAULT_MODEL=deepseek-chat

# MCP (Model Context Protocol) for scientific skills
MCP_ENABLED=true
MCP_COMMAND=uvx
MCP_ARGS=claude-skills-mcp

# ===========================================
# Security
# ===========================================
# Session secret (generate with: openssl rand -hex 32)
SESSION_SECRET=your-random-session-secret-here

# Internal API authentication
WEB_API_USER=overleaf
WEB_API_PASSWORD=change-this-password

# ===========================================
# Application Settings
# ===========================================
APP_NAME=Overleaf
NODE_ENV=production
LISTEN_ADDRESS=0.0.0.0

# Port (Railway sets this automatically)
PORT=3000

# Email confirmation (disable for self-hosted)
EMAIL_CONFIRMATION_DISABLED=true

# Allow public access without login
OVERLEAF_ALLOW_PUBLIC_ACCESS=true

# ===========================================
# Internal Service Hostnames
# ===========================================
# For Railway private networking, use: service-name.railway.internal
# For Docker Compose, use service names directly

CHAT_HOST=chat
CLSI_HOST=clsi
CONTACTS_HOST=contacts
DOCSTORE_HOST=docstore
DOCUMENT_UPDATER_HOST=document-updater
FILESTORE_HOST=filestore
HISTORY_V1_HOST=history-v1
NOTIFICATIONS_HOST=notifications
PROJECT_HISTORY_HOST=project-history
REALTIME_HOST=real-time

# ===========================================
# Optional: Git Bridge
# ===========================================
GIT_BRIDGE_ENABLED=false
GIT_BRIDGE_HOST=git-bridge
GIT_BRIDGE_PORT=8000

# ===========================================
# Optional: Email (SMTP)
# ===========================================
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=
# SMTP_PASS=
# SMTP_FROM_EMAIL=noreply@example.com

# ===========================================
# Optional: Object Storage (S3-compatible)
# ===========================================
# For production, consider using S3/R2/MinIO instead of local storage
# PERSISTOR_BACKEND=s3
# S3_BUCKET=your-bucket-name
# S3_REGION=us-east-1
# S3_ACCESS_KEY_ID=
# S3_SECRET_ACCESS_KEY=
